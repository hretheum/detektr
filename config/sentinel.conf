# Redis Sentinel Configuration for High Availability
# Port for Sentinel
port 26379

# Bind to all interfaces for Docker networking
bind 0.0.0.0
protected-mode no

# Working directory
dir /tmp

# Monitor the master named "mymaster"
# Syntax: sentinel monitor <master-name> <ip> <port> <quorum>
# Quorum: number of Sentinels that need to agree about master being down
sentinel monitor mymaster redis-master 6379 2

# How long (in milliseconds) the master should be unreachable
# in order to consider it in S_DOWN state
sentinel down-after-milliseconds mymaster 30000

# Specifies the failover timeout in milliseconds
sentinel failover-timeout mymaster 180000

# How many replicas can be reconfigured to point to the new replica simultaneously
# during the failover. Use a low number if you have very slow network.
sentinel parallel-syncs mymaster 1

# Authentication (if needed)
# sentinel auth-pass mymaster yourpassword

# Deny scripts reconfig (security)
sentinel deny-scripts-reconfig yes

# Logging
loglevel notice
logfile ""
syslog-enabled no

# Sentinel announcement settings for Docker
# These help Sentinel work correctly in containerized environments
sentinel announce-ip sentinel-1
sentinel announce-port 26379

# Scripts and notifications (optional)
# sentinel notification-script mymaster /scripts/notify.sh
# sentinel client-reconfig-script mymaster /scripts/reconfig.sh

# Configure master password if set
# sentinel auth-pass mymaster <password>

# Sentinel running mode
sentinel resolve-hostnames yes
sentinel announce-hostnames yes
